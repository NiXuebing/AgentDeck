try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9e89217b-cd00-4f45-9cd5-9761566d58f8",e._sentryDebugIdIdentifier="sentry-dbid-9e89217b-cd00-4f45-9cd5-9761566d58f8")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63578],{0x28db2c9a:(e,t,a)=>{a.d(t,{j:()=>s});var n=a(0x22102fd88),r=a(0x1a1f6dda6),i=a(0xfc89b4a4),l=a(0x38e6572);function s(e){let{className:t,height:a=24,width:s,rounded:u="md",variant:d="light"}=e,o=(0,i.useRef)(null),c={height:a,width:"number"==typeof s||"string"==typeof s?s:"object"==typeof s?(null===o.current&&(o.current=Math.round(Math.random()*(s.max-s.min))+s.min),o.current):"100%",maxWidth:"100%"};return(0,n.jsx)("div",{className:(0,r.A)("light"===d?"relative bg-bg-400 overflow-hidden after:absolute after:inset-0 after:translate-x-[-100%] after:bg-gradient-to-r after:from-bg-000/0 after:from-0% after:via-bg-000/20 after:via-50% after:to-100% after:to-bg-000/0 after:animate-[shimmer_1.5s_infinite]":"relative bg-text-500/50 overflow-hidden after:absolute after:inset-0 after:translate-x-[-100%] after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0 after:animate-[shimmer_1.5s_infinite]",t,{"rounded-full":"full"===u,"rounded-xl":"xl"===u,"rounded-lg":"lg"===u,"rounded-md":"md"===u,"rounded-sm":"sm"===u}),style:c,children:(0,n.jsx)("span",{className:"sr-only",children:(0,n.jsx)(l.A,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}},0x29fb2c10:(e,t,a)=>{a.d(t,{$:()=>s});var n=a(0x22102fd88),r=a(0xa5acf583),i=a(0xef41e510),l=a.n(i);let s=()=>{let{websiteBaseUrl:e}=(0,r._r)();return(0,n.jsxs)("div",{className:"text-text-500 text-xs text-center",children:["Credits are consumed with API, Claude Code and Workbench usage, and expire 1 year after purchase. By clicking “Buy credits” you agree to"," ",(0,n.jsx)(l(),{href:"".concat(e,"/legal/credit-terms"),className:"text-accent-main-100 hover:underline",target:"_blank",children:"Anthropic’s Credit Terms"})]})}},0x3ea357b0:(e,t,a)=>{a.d(t,{DU:()=>P,EF:()=>T,EZ:()=>E,OK:()=>c,PI:()=>k,Pz:()=>d,Q9:()=>h,Rd:()=>x,Rw:()=>L,Si:()=>N,UY:()=>g,ZA:()=>y,bY:()=>K,cM:()=>b,fZ:()=>p,gX:()=>S,nc:()=>m,qs:()=>w,we:()=>u,xX:()=>j,zM:()=>_});var n=a(0x12c9046cd),r=a(0x14dc7c241),i=a(0x49fac030),l=a(0x17e725145),s=a(0xfc89b4a4);let u="list_invoices";function d(){let{activeOrganization:e}=(0,r.YL)(),{data:t,variables:a,...i}=(0,n.L2)("/api/billing/".concat(null==e?void 0:e.uuid,"/commercial_pricing"),"POST",{enabled:!!e}),[l,u]=(0,s.useState)(),[d,o]=(0,s.useState)();return(0,s.useEffect)(()=>{t&&(u(t),o(a))},[t,a]),{data:l,variables:d,...i}}let o="payment-method",c="credit-balance",f="credit-expiry";function m(){let{activeOrganization:e}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/payment_method"),{enabled:!!e,queryKey:[o,null==e?void 0:e.uuid],staleTime:9e5})}function y(){let{activeOrganization:e}=(0,r.YL)(),t=(0,l.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/payment_method/update_latest"),"POST",{onSuccess:a=>{t.setQueryData([o,null==e?void 0:e.uuid],a)}})}function p(){let{enabled:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/prepaid/credits"),{enabled:!!t&&e,queryKey:[c,null==t?void 0:t.uuid],staleTime:3e5,meta:{errorMessage:"There was an error while trying to load your credit balance. Please try again."}})}function g(){let{enabled:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/prepaid/credit_expiry"),{enabled:!!t&&e,queryKey:[f,null==t?void 0:t.uuid],staleTime:9e5,meta:{errorMessage:"There was an error while trying to load credit expiry information. Please try again."}})}let v="auto-reload";function b(){let{activeOrganization:e}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/prepaid/auto_recharge"),{enabled:!!e,queryKey:[v,null==e?void 0:e.uuid],staleTime:9e5})}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),a=(0,l.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(null==t?void 0:t.uuid,"/prepaid/auto_recharge"),"DELETE",{...e,async onSettled(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];await a.invalidateQueries({queryKey:[v]}),await (null==(t=e.onSettled)?void 0:t.call(e,...r))}})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),a=(0,l.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(null==t?void 0:t.uuid,"/prepaid/auto_recharge"),"PUT",{...e,async onSettled(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];await Promise.all([a.invalidateQueries({queryKey:[v]}),a.invalidateQueries({queryKey:[c]})]),await (null==(t=e.onSettled)?void 0:t.call(e,...r))}})}function _(){let{activeOrganization:e}=(0,r.YL)(),t=(0,l.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/prepaid/upgrade"),"POST",{async onSettled(){await Promise.all([t.invalidateQueries({queryKey:[i.i5]}),t.invalidateQueries({queryKey:[i.Rw]})])},meta:{noToast:e=>"already_prepaid"===e.message}})}function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),a=(0,l.useQueryClient)();return(0,n.L2)("/api/organizations/".concat(null==t?void 0:t.uuid,"/prepaid/credits"),"POST",{...e,async onSuccess(){for(var t,n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];await Promise.all([a.invalidateQueries({queryKey:[c]}),a.invalidateQueries({queryKey:[f]}),a.invalidateQueries({queryKey:[i.i5]}),a.invalidateQueries({queryKey:[i.Rw]}),a.invalidateQueries({queryKey:[u]})]),await (null==(t=e.onSuccess)?void 0:t.call(e,...r))},meta:{noToast:!0}})}function S(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/pt"),{enabled:e&&!!t,queryKey:["provisioned-throughput",null==t?void 0:t.uuid],staleTime:9e5})}function T(){let{enabled:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),a="/api/organizations/".concat(null==t?void 0:t.uuid,"/invoices?limit=25");return(0,n.iC)(a,{pageParamName:"page",queryKey:[u,null==t?void 0:t.uuid],enabled:!!t&&e,staleTime:3e5,meta:{errorMessage:"There was an error while trying to load your invoices. Please try again."}})}function E(){let{activeOrganization:e}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/invoices/overdue"),{enabled:!!e,queryKey:["overdue-invoices",null==e?void 0:e.uuid],staleTime:3e5,meta:{errorMessage:"There was an error while trying to check for overdue invoices. Please try again."}})}function P(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/setup_required"),{enabled:!!t&&e,queryKey:["setup_required",null==t?void 0:t.uuid],staleTime:3e5})}function L(){let{activeOrganization:e}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/contracts/postpaid"),{enabled:!!e,queryKey:["contract_post_paid",null==e?void 0:e.uuid],staleTime:3e5})}function K(e){let{purchaseId:t,enabled:a=!0,refetchInterval:i=2e3}=e,{activeOrganization:l}=(0,r.YL)();return(0,n.Sk)("/api/organizations/".concat(null==l?void 0:l.uuid,"/prepaid/commits/").concat(t),{enabled:!!l&&!!t&&a,queryKey:["purchase_status",null==l?void 0:l.uuid,t],refetchInterval:e=>{let t=e.state.data;return(null==t?void 0:t.status)!=="paid"&&(null==t?void 0:t.status)!=="failed"&&i},staleTime:0,retry:3})}let j="check-3ds-required";function k(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.YL)(),a=null==t?void 0:t.uuid;return(0,n.Sk)("/api/organizations/".concat(a,"/check_3ds_required"),{enabled:e&&!!t,queryKey:[j,a],meta:{noToast:!0},staleTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,r.YL)(),a=null==t?void 0:t.uuid;return(0,n.L2)("/api/organizations/".concat(a,"/verify_payment_method_3ds"),"POST",{...e,enabled:!!t})}},0xbb84ce70:(e,t,a)=>{a.d(t,{j:()=>n.j});var n=a(0x28db2c9a)},0x123b9c5c8:(e,t,a)=>{a.d(t,{z:()=>i});var n=a(0x22102fd88),r=a(0x1a1f6dda6);let i=e=>{let{percentage:t,className:a}=e;return(0,n.jsx)("div",{className:(0,r.A)("bg-bg-500 h-2 w-full overflow-hidden rounded-full",a),"data-testid":"progress-bar",children:(0,n.jsx)("div",{className:"bg-text-200 h-2 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(t,"%")}})})}},0x19d0e2d1f:(e,t,a)=>{a.d(t,{Q:()=>o});var n=a(0x22102fd88),r=a(0x14dc7c241),i=a(0xb323e954),l=a(0x1f0218c95),s=a(0x1a1f6dda6),u=a(0xfc89b4a4),d=a(0x1a54a8de6);let o=(0,d.Ww)(e=>{let{className:t,defaultAddress:a,onCompleteChange:o,same:c,setSame:f}=e,m=(0,l.useElements)(),[y,p]=(0,u.useState)(!1),{activeOrganization:g}=(0,r.YL)(),[v,b]=(0,u.useReducer)(e=>e+1,0),x=(0,d.mz)();return(0,u.useEffect)(()=>{if(!y)return;let e=null==m?void 0:m.getElement("address");if(!e)return;let t=e=>{o(e.complete)};return e.on("change",t),()=>{e.off("change",t)}},[m,y,o]),(0,u.useEffect)(()=>{c&&(p(!1),b())},[c,a]),(0,n.jsxs)("div",{className:(0,s.A)("border-border-300 mt-3 flex-col items-center justify-center gap-3 rounded-xl border p-3",t),children:[(0,n.jsx)("div",{className:"flex items-start pb-2",children:(0,n.jsx)(i.S,{checked:c,onChange:()=>{f(!c)},testId:"physical-address-checkbox",label:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{className:"text-base text-text-100 text-sm font-medium",children:"My shipping address is the same as my billing address"}),(0,n.jsx)("div",{className:"text-xs text-normal text-text-500",children:"This information is used for tax purposes."})]})})}),(0,n.jsx)(l.AddressElement,{className:(0,s.A)("mt-2",c&&"hidden"),options:{mode:"shipping",display:{name:"organization"},allowedCountries:x,defaultValues:{name:null==g?void 0:g.name,address:a}},onReady:()=>p(!0)},"".concat(v,"-address"))]})})},0x1a54a8de6:(e,t,a)=>{a.d(t,{Dn:()=>y,LV:()=>o,Ww:()=>f,gU:()=>c,mz:()=>m,p8:()=>p});var n=a(0x22102fd88),r=a(0x14dc7c241),i=a(0x1bdad8807),l=a(0x215f3d6df),s=a(0x14023fbb8),u=a(0x1f0218c95),d=a(0xfc89b4a4);let o="310px",c=()=>(0,d.useMemo)(()=>{let e=window.getComputedStyle(document.body),t="hsl(".concat(e.getPropertyValue("--text-200"),")"),a="hsl(".concat(e.getPropertyValue("--bg-000"),")"),n="hsl(".concat(e.getPropertyValue("--accent-secondary-100"),")");return{loader:"never",appearance:{theme:"night",variables:{fontSizeSm:"0.875rem",fontSizeBase:"1rem",fontFamily:'var(--font-sans), ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',colorBackground:a,focusBoxShadow:"none",focusBorder:"1px solid ".concat(n),colorText:t},rules:{".Label":{color:t,fontWeight:"500"},".Input":{border:"1px solid ".concat(a),boxShadow:"none"},".Input:focus":{border:"1px solid ".concat(n)},".CodeInput":{border:"1px solid hsl(50 9% 73.7%)"}}}}},[!1]),f=e=>{let t=(0,d.forwardRef)((t,a)=>{let r=(0,u.useElements)(),i=(0,u.useStripe)();return(0,d.useImperativeHandle)(a,()=>({elements:r,stripe:i}),[r,i]),(0,n.jsx)(e,{...t})});t.displayName="".concat(e.displayName,"-ExposedElements");let a=(0,d.forwardRef)((e,a)=>{let{elementsOptions:r,region:l,...s}=e,d=(0,i.ib)(l);return(0,n.jsx)(u.Elements,{options:r,stripe:d,children:(0,n.jsx)(t,{ref:a,...s})},l)});return a.displayName="".concat(e.displayName,"-WrappedElements"),a},m=()=>{let{supportedRegions:e}=(0,l.D)("console");return(0,d.useMemo)(()=>e.filter(e=>e.stripe_address_supported).map(e=>e.code),[e])},y=f(e=>{let{onReady:t,disabled:a,onCompleteChange:i,onAddressChange:l,onCountryChange:s,onNameChange:o,defaultCountry:c,defaultName:f}=e,y=(0,u.useElements)(),{account:p}=(0,r.YL)(),g=m(),[v,b]=(0,d.useReducer)(e=>e+1,0),x=2===v;(0,d.useEffect)(()=>{x&&t()},[x,t]);let[h,_]=(0,d.useState)(!1);(0,d.useEffect)(()=>{if(!x)return;let e=null==y?void 0:y.getElement("payment");if(!e)return;let t=e=>{_(e.complete)};return e.on("change",t),()=>{e.off("change",t)}},[x,y]);let[w,S]=(0,d.useState)(!1),[T,E]=(0,d.useState)();return(0,d.useEffect)(()=>{if(!x)return;let e=null==y?void 0:y.getElement("address");if(!e)return;let t=e=>{S(e.complete),null==l||l(e.value.address);let t=e.value.address.country;t!==T&&(E(t),null==s||s(t)),e.value.name&&(null==o||o(e.value.name))};return e.on("change",t),()=>{e.off("change",t)}},[x,y,l,s,o,T]),(0,d.useEffect)(()=>{i(h&&w)},[h,w,i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.AddressElement,{className:"mb-2",options:{mode:"billing",allowedCountries:g,defaultValues:{name:null!=f?f:null==p?void 0:p.full_name,address:c?{country:c}:void 0}},onReady:b}),(0,n.jsx)(u.PaymentElement,{options:{readOnly:a,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==p?void 0:p.email_address,name:null==p?void 0:p.full_name}},wallets:{applePay:"never",googlePay:"never"}},onReady:b})]})}),p=()=>(0,n.jsx)("div",{className:"bg-bg-200 absolute inset-0 flex h-full w-full items-center justify-center",children:(0,n.jsx)(s.R,{})})},0x1bdad8807:(e,t,a)=>{a.d(t,{nW:()=>p,zW:()=>f,Ak:()=>c,ib:()=>y});var n=a(0x78b33fbd),r=a(0xfc89b4a4);a(0x49fac030);var i=a(0x12c9046cd),l=a(0xa5acf583),s=a(0x14dc7c241),u=a(0xc6857cab);let d=async e=>{if(u.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:t}=await a.e(13508).then(a.bind(a,0x2282f58c4));return t(e)},o=new Set(["AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK"]);function c(e){let t=(0,l._r)(),a=(0,n.useDynamicConfig)("always_use_us_sandbox").get("always_use_us_sandbox",!1),i=(0,n.useDynamicConfig)("meb_enabled").get("meb_capability_enabled",!1);return(0,r.useMemo)(()=>a?"us_sandbox":i?e&&o.has(e.toUpperCase())?"ie":t.stripePublishableKeySandbox?"us_sandbox":"us":"us",[a,e,i,t.stripePublishableKeySandbox])}let f=()=>{let{activeOrganization:e}=(0,s.YL)();return(0,i.L2)("/api/stripe/".concat(null==e?void 0:e.uuid,"/intent"),"POST",{enabled:!!(null==e?void 0:e.uuid),retry:2,retryDelay:2e3})},m={};function y(e){return p(e,(0,l._r)())}function p(e,t){let a="ie"===e?t.stripePublishableKeyIreland:"us_sandbox"===e&&t.stripePublishableKeySandbox?t.stripePublishableKeySandbox:t.stripePublishableKey;return m[a]||(m[a]=d(a)),m[a]}},0x1c4fb6566:(e,t,a)=>{a.d(t,{z:()=>m});var n=a(0x22102fd88),r=a(0xf32c56dd),i=a(0xa5acf583),l=a(0x23f1c451b),s=a(0x1bdad8807),u=a(0x17e725145),d=a(0xfc89b4a4),o=a(0x15068fa65),c=a(0x123b9c5c8),f=a(0x3ea357b0);function m(e){let{startStep:t,onComplete:a,onError:m,setPurchaseModalState:y}=e,[p,g]=(0,d.useState)(!1),[v,b]=(0,d.useState)(0),[x,h]=(0,d.useState)(),[_,w]=(0,d.useState)(),[S,T]=(0,d.useState)(),E=(0,d.useRef)(null),P=(0,d.useRef)(new Set),L=(0,r.st)(),K=(0,i._r)(),j=(0,u.useQueryClient)(),{data:k,error:N,refetch:q}=(0,f.bY)({purchaseId:x,enabled:!!x}),z=S||(null==N?void 0:N.message);(0,d.useEffect)(()=>{let e=P.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear(),E.current&&(E.current.reject(Error("Component unmounted")),E.current=null)}},[]),(0,d.useEffect)(()=>{(()=>{if(k&&x){if(_&&Date.now()-_>6e4&&90!==v&&100!==v){T("Purchase verification timed out. Please check your billing page."),E.current&&(E.current.reject(Error("Purchase verification timed out")),E.current=null),g(!1),b(0),h(void 0),w(void 0),y&&y("error"),null==m||m();return}switch(k.status){case"paid":b(100),(0,l.R)("event","api_credits_purchase"),L.track({event_key:"billing.upgrade.setup_billing.submitted",result:"success"});{let e=setTimeout(()=>{P.current.delete(e),E.current&&(E.current.resolve(),E.current=null),j.invalidateQueries({queryKey:[f.OK]}),j.invalidateQueries({queryKey:[f.we]}),a(),y&&y("success"),g(!1),h(void 0),w(void 0)},500);P.current.add(e)}break;case"failed":T(k.error_message||"Payment failed. Please try again."),E.current&&(E.current.reject(Error(k.error_message||"Payment failed")),E.current=null),y&&y("error"),g(!1),b(0),h(void 0),w(void 0),null==m||m();break;case"action_needed":if(h(void 0),w(void 0),90!==v&&b(90),k.stripe_payment_intent_client_secret){let e=k.stripe_payment_intent_client_secret;(async()=>{try{let t=await (0,s.nW)(k.entity,K);if(!t)throw Error("Stripe not loaded");let n=await t.handleNextAction({clientSecret:e});if(n.error)T(n.error.message),y&&y("error"),E.current&&(E.current.reject(Error(n.error.message)),E.current=null),g(!1),b(0),w(void 0),null==m||m();else{b(100);let e=setTimeout(()=>{P.current.delete(e),w(void 0),E.current&&(E.current.resolve(),E.current=null),j.invalidateQueries({queryKey:[f.OK]}),j.invalidateQueries({queryKey:[f.we]}),a(),g(!1)},3e3);P.current.add(e)}}catch(e){}})()}}}})()},[k,x,_,v,K,L,a,m,y,j]);let C=(0,d.useCallback)(async e=>{if(e.purchase_id){(0,o.flushSync)(()=>{h(e.purchase_id),w(Date.now()),b(80)}),await q();let t=new Promise((e,t)=>{E.current={resolve:e,reject:t}});await t}else{if(b(80),"requires_action"===e.payment_status&&e.payment_intent_client_secret){b(90);let t=await (0,s.nW)(e.entity,K);if(t){let a=await t.handleNextAction({clientSecret:e.payment_intent_client_secret});if(a.error){T(a.error.message),y&&y("error"),g(!1),b(0),null==m||m();return}}}b(100),(0,l.R)("event","api_credits_purchase"),L.track({event_key:"billing.upgrade.setup_billing.submitted",result:"success"});let t=setTimeout(()=>{P.current.delete(t),j.invalidateQueries({queryKey:[f.OK]}),j.invalidateQueries({queryKey:[f.we]}),a(),y&&y("success"),g(!1)},500);P.current.add(t)}},[K,L,a,m,y,q,j]),A=(0,d.useCallback)(e=>{g(!0),b(null!=e?e:1===t?20:60),T(void 0)},[t]),D=(0,d.useCallback)(()=>{g(!1),b(0),h(void 0),w(void 0),T(void 0)},[]),M=(0,d.useCallback)(e=>{b(e)},[]),Y=p?(0,n.jsxs)("div",{className:"px-4 py-2",children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)(c.z,{percentage:v,className:80===v&&x&&(null==k?void 0:k.status)==="pending"?"animate-pulse":""})}),(0,n.jsxs)("div",{className:"text-xs text-text-400 text-center",children:[20===v&&"Updating billing information…",40===v&&"Processing payment method…",60===v&&"Processing purchase…",80===v&&"Verifying transaction…",90===v&&"Completing additional verification…",100===v&&"Finalizing transaction…"]})]}):null;return{purchaseProgress:v,isSubmitting:p,startPurchase:C,start:A,reset:D,error:z,PurchaseProgressBar:Y,advanceStep:M}}},0x23ed6222b:(e,t,a)=>{a.d(t,{vv:()=>n});let n=function(e,t){let{preferWholeNumber:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let n={minimumFractionDigits:2,maximumFractionDigits:2};a&&e/100%1==0&&(n.minimumFractionDigits=0,n.maximumFractionDigits=0);let r=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",i="string"==typeof r?r:r[0];return(["SGD","AUD","NZD"].includes(t)||"USD"===t&&"en-US"!==i)&&(n.currencyDisplay="code"),new Intl.NumberFormat(r||void 0,{style:"currency",currency:t,...n}).format(e/100)},r={GST:"GST",VAT:"VAT"};r.GST,r.VAT,r.VAT,r.VAT,r.GST}}]);